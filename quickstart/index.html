<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    
    
    <link rel="shortcut icon" href="../img/favicon.ico">

    
    <title>Quickstart - LEAF</title>
    

    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.12.0/css/all.css">
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.12.0/css/v4-shims.css">
    <link rel="stylesheet" href="//cdn.jsdelivr.net/npm/hack-font@3.3.0/build/web/hack.min.css">
    <link href='//rsms.me/inter/inter.css' rel='stylesheet' type='text/css'>
    <link href='//fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,700italic,400,300,600,700&subset=latin-ext,latin' rel='stylesheet' type='text/css'>
    <link href="../css/bootstrap-custom.min.css" rel="stylesheet">
    <link href="../css/base.min.css" rel="stylesheet">
    <link href="../css/cinder.min.css" rel="stylesheet">

    
        
        <link rel="stylesheet" href="//cdn.jsdelivr.net/gh/highlightjs/cdn-release@9.18.0/build/styles/github.min.css">
        
    

    <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!--[if lt IE 9]>
            <script src="https://cdn.jsdelivr.net/npm/html5shiv@3.7.3/dist/html5shiv.min.js"></script>
            <script src="https://cdn.jsdelivr.net/npm/respond.js@1.4.2/dest/respond.min.js"></script>
        <![endif]-->

    

     
</head>

<body>

    <div class="navbar navbar-default navbar-fixed-top" role="navigation">
    <div class="container">

        <!-- Collapsed navigation -->
        <div class="navbar-header">
            <!-- Expander button -->
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            

            <!-- Main title -->

            
              <a class="navbar-brand" href="..">LEAF</a>
            
        </div>

        <!-- Expanded navigation -->
        <div class="navbar-collapse collapse">
                <!-- Main navigation -->
                <ul class="nav navbar-nav">
                
                
                    <li >
                        <a href="..">Home</a>
                    </li>
                
                
                
                    <li >
                        <a href="../installation/">Installation</a>
                    </li>
                
                
                
                    <li class="active">
                        <a href="./">Quickstart</a>
                    </li>
                
                
                
                    <li class="dropdown">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown">Packages <b class="caret"></b></a>
                        <ul class="dropdown-menu">
                        
                            
<li >
    <a href="../packages/generator/">Generator</a>
</li>

                        
                            
<li >
    <a href="../packages/tuplizer/">Tuplizer</a>
</li>

                        
                            
<li >
    <a href="../packages/analyzer/">Analyzer</a>
</li>

                        
                            
<li >
    <a href="../packages/plotter/">Plotter</a>
</li>

                        
                            
<li >
    <a href="../packages/submitter/">Submitter</a>
</li>

                        
                        </ul>
                    </li>
                
                
                </ul>

            <ul class="nav navbar-nav navbar-right">
                    <li>
                        <a href="#" data-toggle="modal" data-target="#mkdocs_search_modal">
                            <i class="fas fa-search"></i> Search
                        </a>
                    </li>
                    <li >
                        <a rel="prev" href="../installation/">
                            <i class="fas fa-arrow-left"></i> Previous
                        </a>
                    </li>
                    <li >
                        <a rel="next" href="../packages/generator/">
                            Next <i class="fas fa-arrow-right"></i>
                        </a>
                    </li>
            </ul>
        </div>
    </div>
</div>

    <div class="container">
        
        
        <div class="col-md-3"><div class="bs-sidebar hidden-print affix well" role="complementary">
    <ul class="nav bs-sidenav">
        <li class="first-level active"><a href="#quickstart-guide">Quickstart guide</a></li>
            <li class="second-level"><a href="#prerequisites">Prerequisites</a></li>
                
            <li class="second-level"><a href="#event-selection-and-histogram-production">Event selection and histogram production</a></li>
                
            <li class="second-level"><a href="#plotting-distributions">Plotting distributions</a></li>
                
            <li class="second-level"><a href="#post-analysis">Post-analysis</a></li>
                
            <li class="second-level"><a href="#conclusion">Conclusion</a></li>
                
    </ul>
</div></div>
        <div class="col-md-9" role="main">

<h1 id="quickstart-guide">Quickstart guide</h1>
<p>Welcome to the quickstart guide for performing an analysis using LEAF! The steps below will introduce some essential features of any data analysis.</p>
<h2 id="prerequisites">Prerequisites</h2>
<p>This guide assumes you have just installed LEAF and created a fresh analysis following the instructions in the <a href="../installation/">installation guide</a>.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>For this guide, we will assume the new analysis was named <code>MyAnalysis</code>. If you chose a different name, please adjust all the commands below accordingly. You will not need to modify any code, but only the commands to be executed</p>
</div>
<p>If you have not yet set up your own analysis, either complete the installation and setup of a new analysis first, or make sure to adjust the commands and file contents shown below to your structure.</p>
<h2 id="event-selection-and-histogram-production">Event selection and histogram production</h2>
<p>The first step will be to loop over some test samples of (mock-)data, a simulated background, and two simulated signals. Within the loop, events will be selected and a number of histograms will be filled. We will use the <code>AnalysisTool</code> class to perform this task. A new incarnation of such a tool was created when setting up the new analysis. It can be found in <code>LEAF/MyAnalysis/Analyzer/src/MyAnalysisTool.cc</code>.</p>
<p>The settings of the job, such as the files to run over or the input/output paths are configured in an <code>xml</code> file, which can be found in <code>LEAF/MyAnalysis/Analyzer/config/MyAnalysis.xml</code>. Be sure to have a look into both files and understand what is going on.</p>
<p>The configuration file is already prepared to run over the test samples (in <code>LEAF/.testsamples/*.root</code>), so we can simply run the <code>Analyzer</code> executable locally, passing the configuration file as an argument:</p>
<pre><code class="bash">cd $LEAFPATH/MyAnalysis/Analyzer/config
Analyzer MyAnalysis.xml
</code></pre>

<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The above command can be run from anywhere, then the relative (or absolute, if preferred) path to the <code>xml</code> file must be adjusted accordingly. However, this is not true for all programs along the way, so it is best to execute all commands from within the folder that contains the file passed as an argument.</p>
</div>
<p>The default configuration file will instruct the <code>Analyzer</code> to store the output root files in a folder on the same level as the main LEAF folder, <code>MyAnalysis/2017/Preselection/InitialSetup</code>. To get there, do</p>
<pre><code class="bash">cd $LEAFPATH/../MyAnalysis/2017/Preselection/InitialSetup
</code></pre>

<p>You will find four root files in that folder, one for each of the samples we processed.</p>
<p>In a real analysis, a given process will often be split into different samples binned in a certain variable (for example HT, PT, or M). In order to merge samples adding up to the same process, we will use the <code>Submitter</code>:</p>
<pre><code class="bash">cd $LEAFPATH/MyAnalysis/Analyzer/config
submit.py MyAnalysis.xml -p
</code></pre>

<div class="admonition note">
<p class="admonition-title">Note</p>
<p>In this exercise, this step would not really be necessary, but in a full-fledged analysis it will be.</p>
</div>
<p>You can see two new files created, one for data and one for background. Note that the names of the new samples are slightly changed.</p>
<h2 id="plotting-distributions">Plotting distributions</h2>
<p>The next step will be to visualize the events processed by plotting distributions of relevant observables and comparing different processes. The <code>Plotter</code> package takes care of this. Just like the <code>Analyzer</code> executable, also the <code>Plotter</code> executable is configured through an <code>xml</code> file, which contains information on the datasets to be plotted.</p>
<p>When creating the new analysis, a corresponding configuration file for the <code>Plotter</code> has already been created, so simply plot the distributions:</p>
<pre><code class="bash">cd $LEAFPATH/MyAnalysis/Plotter
Plotter Default.xml
</code></pre>

<p>The distributions will be created in the folder containing the output root files of the previous step, which is on the same level as the main LEAF folder: <code>MyAnalysis/2017/Preselection/InitialSetup/plots/distributions</code>. To get there, do</p>
<pre><code class="bash">cd $LEAFPATH/../MyAnalysis/2017/Preselection/InitialSetup/plots/distributions
</code></pre>

<p>Feel free to inspect the plots before moving on. Also feel free to try and add some new event selection steps and plot the default distributions after those. Adding more observables could be useful as well.</p>
<h2 id="post-analysis">Post-analysis</h2>
<p>After having selected events and plotted distributions at the different stages of the event selection, now we will perform some further analysis to understand our selection and finally infer the presence or absence of a signal over the standard model expectation.</p>
<p>Together with the new analysis came a basic collection of analysis scripts, with are contained in the <code>PostAnalyzer</code> folder. It contains one main executable script. Let us execute it:</p>
<pre><code class="bash">cd $LEAFPATH/MyAnalysis/Analyzer/PostAnalyzer
./steer.py
</code></pre>

<p>This will produce two results at the moment. They are new plots to be found in the usual output folder. To get there, do</p>
<pre><code class="bash">cd $LEAFPATH/../MyAnalysis/2017/Preselection/InitialSetup/plots
</code></pre>

<p>The first are two plots of the efficiency of each selection step applied in the beginning of this quickstart, one with a linear and one with a logarithmic y-axis scale. This type of plot is useful for monitoring the behavior of the event selections applied.</p>
<p>The second new result is the expected upper limit on our test signal cross section, as extracted from the selected background and signal. Note that the data are not considered here for the moment.</p>
<h2 id="conclusion">Conclusion</h2>
<p>In this short example, you have performed a pre-defined event selection, you have visualized the intermediate steps and the final outcome. Last, you have run additional scripts on your fully selected events to compute the selection efficiency of each step and expected upper limits on the signal production cross section. Details on each LEAF package can be found in this documentation as well, see the links in <a href="..">here</a>.</p></div>
        
        
    </div>

    
      <footer class="col-md-12 text-center">
          
          
            <hr>
            <p>
            <small>Documentation built with <a href="http://www.mkdocs.org/">MkDocs</a>.</small>
            </p>
          

          
          
      </footer>
    
    <script src="//ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script>
    <script src="../js/bootstrap-3.0.3.min.js"></script>

    
    <script src="//cdn.jsdelivr.net/gh/highlightjs/cdn-release@9.18.0/build/highlight.min.js"></script>
        
    <script>hljs.initHighlightingOnLoad();</script>
    

    <script>var base_url = ".."</script>
    
    <script src="../js/base.js"></script>
    <script src="../search/main.js"></script>

    <div class="modal" id="mkdocs_search_modal" tabindex="-1" role="dialog" aria-labelledby="searchModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-lg">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal">
                    <span aria-hidden="true">&times;</span>
                    <span class="sr-only">Close</span>
                </button>
                <h4 class="modal-title" id="searchModalLabel">Search</h4>
            </div>
            <div class="modal-body">
                <p>
                    From here you can search these documents. Enter
                    your search terms below.
                </p>
                <form>
                    <div class="form-group">
                        <input type="text" class="form-control" placeholder="Search..." id="mkdocs-search-query" title="Type search term here">
                    </div>
                </form>
                <div id="mkdocs-search-results"></div>
            </div>
            <div class="modal-footer">
            </div>
        </div>
    </div>
</div><div class="modal" id="mkdocs_keyboard_modal" tabindex="-1" role="dialog" aria-labelledby="keyboardModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title" id="keyboardModalLabel">Keyboard Shortcuts</h4>
                <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
            </div>
            <div class="modal-body">
              <table class="table">
                <thead>
                  <tr>
                    <th style="width: 20%;">Keys</th>
                    <th>Action</th>
                  </tr>
                </thead>
                <tbody>
                  <tr>
                    <td class="help shortcut"><kbd>?</kbd></td>
                    <td>Open this help</td>
                  </tr>
                  <tr>
                    <td class="next shortcut"><kbd>n</kbd></td>
                    <td>Next page</td>
                  </tr>
                  <tr>
                    <td class="prev shortcut"><kbd>p</kbd></td>
                    <td>Previous page</td>
                  </tr>
                  <tr>
                    <td class="search shortcut"><kbd>s</kbd></td>
                    <td>Search</td>
                  </tr>
                </tbody>
              </table>
            </div>
            <div class="modal-footer">
            </div>
        </div>
    </div>
</div>
    </body>

</html>
