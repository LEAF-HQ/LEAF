<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    
    
    <link rel="shortcut icon" href="../../img/favicon.ico">

    
    <title>Submitter - LEAF</title>
    

    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.12.0/css/all.css">
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.12.0/css/v4-shims.css">
    <link rel="stylesheet" href="//cdn.jsdelivr.net/npm/hack-font@3.3.0/build/web/hack.min.css">
    <link href='//rsms.me/inter/inter.css' rel='stylesheet' type='text/css'>
    <link href='//fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,700italic,400,300,600,700&subset=latin-ext,latin' rel='stylesheet' type='text/css'>
    <link href="../../css/bootstrap-custom.min.css" rel="stylesheet">
    <link href="../../css/base.min.css" rel="stylesheet">
    <link href="../../css/cinder.min.css" rel="stylesheet">

    
        
        <link rel="stylesheet" href="//cdn.jsdelivr.net/gh/highlightjs/cdn-release@9.18.0/build/styles/github.min.css">
        
    

    <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!--[if lt IE 9]>
            <script src="https://cdn.jsdelivr.net/npm/html5shiv@3.7.3/dist/html5shiv.min.js"></script>
            <script src="https://cdn.jsdelivr.net/npm/respond.js@1.4.2/dest/respond.min.js"></script>
        <![endif]-->

    

     
</head>

<body>

    <div class="navbar navbar-default navbar-fixed-top" role="navigation">
    <div class="container">

        <!-- Collapsed navigation -->
        <div class="navbar-header">
            <!-- Expander button -->
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            

            <!-- Main title -->

            
              <a class="navbar-brand" href="../..">LEAF</a>
            
        </div>

        <!-- Expanded navigation -->
        <div class="navbar-collapse collapse">
                <!-- Main navigation -->
                <ul class="nav navbar-nav">
                
                
                    <li >
                        <a href="../..">Home</a>
                    </li>
                
                
                
                    <li >
                        <a href="../../installation/">Installation</a>
                    </li>
                
                
                
                    <li >
                        <a href="../../quickstart/">Quickstart</a>
                    </li>
                
                
                
                    <li class="dropdown active">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown">Packages <b class="caret"></b></a>
                        <ul class="dropdown-menu">
                        
                            
<li >
    <a href="../generator/">Generator</a>
</li>

                        
                            
<li >
    <a href="../tuplizer/">Tuplizer</a>
</li>

                        
                            
<li >
    <a href="../analyzer/">Analyzer</a>
</li>

                        
                            
<li >
    <a href="../plotter/">Plotter</a>
</li>

                        
                            
<li class="active">
    <a href="./">Submitter</a>
</li>

                        
                        </ul>
                    </li>
                
                
                </ul>

            <ul class="nav navbar-nav navbar-right">
                    <li>
                        <a href="#" data-toggle="modal" data-target="#mkdocs_search_modal">
                            <i class="fas fa-search"></i> Search
                        </a>
                    </li>
                    <li >
                        <a rel="prev" href="../plotter/">
                            <i class="fas fa-arrow-left"></i> Previous
                        </a>
                    </li>
                    <li class="disabled">
                        <a rel="next" >
                            Next <i class="fas fa-arrow-right"></i>
                        </a>
                    </li>
            </ul>
        </div>
    </div>
</div>

    <div class="container">
        
        
        <div class="col-md-3"><div class="bs-sidebar hidden-print affix well" role="complementary">
    <ul class="nav bs-sidenav">
        <li class="first-level active"><a href="#submitter">Submitter</a></li>
            <li class="second-level"><a href="#supported-clusters">Supported clusters</a></li>
                
            <li class="second-level"><a href="#create-user-specific-settings">Create user specific settings</a></li>
                
            <li class="second-level"><a href="#usage">Usage</a></li>
                
            <li class="second-level"><a href="#inside-the-box">Inside-the-box</a></li>
                
                <li class="third-level"><a href="#condorbase">CondorBase</a></li>
    </ul>
</div></div>
        <div class="col-md-9" role="main">

<h1 id="submitter">Submitter</h1>
<p>The Submitter package is a helper tool for the <a href="../analyzer">Analyzer</a>. It allows for convenient yet efficient submission submission of jobs to the local cluster.</p>
<h2 id="supported-clusters">Supported clusters</h2>
<p>These are the current supproted clusters. Links to tutorials and settings are provided.</p>
<ul>
<li><a href="https://support.ceci-hpc.be/doc/_contents/QuickStart/SubmittingJobs/SlurmTutorial.html">SLURM</a><ul>
<li><a href="https://wiki.chipp.ch/twiki/bin/view/CmsTier3/SlurmUsage">PSI guide</a></li>
</ul>
</li>
<li><a href="https://htcondor.readthedocs.io/en/latest/users-manual/quick-start-guide.html">HTCondor</a><ul>
<li>@CERN (<a href="https://batchdocs.web.cern.ch/local/quick.html">guide</a>)</li>
<li>@ULB
<!-- - @Desy (<a href="https://confluence.desy.de/pages/viewpage.action?pageId=81094361">guide</a>) --></li>
</ul>
</li>
</ul>
<p>It takes care of the parallelized (re-)submission of Analyzer jobs, retrieving the output, merging individual and groups of processes and prepare them for plotting. No coding should be necessary for a user of LEAF here.</p>
<h2 id="create-user-specific-settings">Create user specific settings</h2>
<p>This allows to store user-specific options to run the jobs into the cluster. The output in the form of a dictionary is store in a json inside the <code>$SUBMITTERPATH</code> folder. An example is given in <code>$SUBMITTERPATH/Settings_exampleuser.json</code>.</p>
<p>To create your personal setting, you can simply create your own json (The path and naming scheme MUST be the same. Just place you username instead of exampleuser.), or run the following command.</p>
<pre><code class="bash">./createUserSettings.py -u &lt;username&gt; -k &lt;cluster&gt;  -e &lt;email&gt;
</code></pre>

<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This command should be done only once, or anytime one wants to update its own settings.</p>
</div>
<h2 id="usage">Usage</h2>
<p>Once you set up your own <a href="#create-user-specific-settings">user settings</a>, you can simply run you xml file as:</p>
<pre><code class="bash">submit.py MyAnalysis.xml &lt;option-1&gt; &lt;option-2&gt; &lt;arg-option-2&gt; &lt;option-3&gt;
</code></pre>

<p>Multiple options, available in the <code>Submitter</code> class are allowed:</p>
<table>
<thead>
<tr>
<th>Long name</th>
<th>Short name</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>--clean</td>
<td>-c</td>
<td>False</td>
<td>Remove the local and the remote workdir.</td>
</tr>
<tr>
<td>--divide</td>
<td>-d</td>
<td>False</td>
<td>Divide the xml file into chunks, create workdir.</td>
</tr>
<tr>
<td>--local</td>
<td>-l</td>
<td></td>
<td>Run split jobs locally.</td>
</tr>
<tr>
<td>--cluster</td>
<td>-k</td>
<td></td>
<td>Overwrite cluster settings defined by the user specific settings.</td>
</tr>
<tr>
<td>--submit</td>
<td>-s</td>
<td>False</td>
<td>Submit split jobs to cluster.</td>
</tr>
<tr>
<td>--output</td>
<td>-o</td>
<td>False</td>
<td>Check the status of the expected output files.</td>
</tr>
<tr>
<td>--add</td>
<td>-a</td>
<td>False</td>
<td>Add split files back together for samples that are fully processed.</td>
</tr>
<tr>
<td>--forceadd</td>
<td>-f</td>
<td>False</td>
<td>Force hadding.</td>
</tr>
<tr>
<td>--notreeadd</td>
<td>-t</td>
<td>False</td>
<td>Add split files without adding the trees.</td>
</tr>
<tr>
<td>--allowincomplete</td>
<td>-i</td>
<td>False</td>
<td>Ignore the non-existent files and does the hadd nonetheless.</td>
</tr>
<tr>
<td>--plothadd</td>
<td>-p</td>
<td>False</td>
<td>Hadd files to groups used for plotting and further analysis.</td>
</tr>
</tbody>
</table>
<h2 id="inside-the-box">Inside-the-box</h2>
<p>There is some magic going inside the above settings. Here, the minimum info for the expert user.</p>
<h3 id="condorbase">CondorBase</h3>
<p>This class is designed to make usage of the <a href="https://htcondor.readthedocs.io/en/latest/apis/python-bindings/index.html">python bindings</a> for <code>HTCondor</code>. It takes care of creating the job info (default values are stored, but can always be modified via <code>ModifyJobInfo</code>). The minimal inputs are the executable and its arguments.</p>
<p>This class takes care of submitting a single job (<code>SubmitJob</code>) as well as multiple jobs (<code>SubmitManyJobs</code>). The latter is implemented as default in the <code>Submitter</code> class.</p>
<p>Already available, but not implemented anywhere yet, is the <code>CheckStatus</code> option to monitor the job queue.</p>
<p>This class is generic and can be easily used to submit any type of job to the HTCondor, as it's not linked to the xml structure provided by the main <code>Analyser</code>.</p></div>
        
        
    </div>

    
      <footer class="col-md-12 text-center">
          
          
            <hr>
            <p>
            <small>Documentation built with <a href="http://www.mkdocs.org/">MkDocs</a>.</small>
            </p>
          

          
          
      </footer>
    
    <script src="//ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script>
    <script src="../../js/bootstrap-3.0.3.min.js"></script>

    
    <script src="//cdn.jsdelivr.net/gh/highlightjs/cdn-release@9.18.0/build/highlight.min.js"></script>
        
    <script>hljs.initHighlightingOnLoad();</script>
    

    <script>var base_url = "../.."</script>
    
    <script src="../../js/base.js"></script>
    <script src="../../search/main.js"></script>

    <div class="modal" id="mkdocs_search_modal" tabindex="-1" role="dialog" aria-labelledby="searchModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-lg">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal">
                    <span aria-hidden="true">&times;</span>
                    <span class="sr-only">Close</span>
                </button>
                <h4 class="modal-title" id="searchModalLabel">Search</h4>
            </div>
            <div class="modal-body">
                <p>
                    From here you can search these documents. Enter
                    your search terms below.
                </p>
                <form>
                    <div class="form-group">
                        <input type="text" class="form-control" placeholder="Search..." id="mkdocs-search-query" title="Type search term here">
                    </div>
                </form>
                <div id="mkdocs-search-results"></div>
            </div>
            <div class="modal-footer">
            </div>
        </div>
    </div>
</div><div class="modal" id="mkdocs_keyboard_modal" tabindex="-1" role="dialog" aria-labelledby="keyboardModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title" id="keyboardModalLabel">Keyboard Shortcuts</h4>
                <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
            </div>
            <div class="modal-body">
              <table class="table">
                <thead>
                  <tr>
                    <th style="width: 20%;">Keys</th>
                    <th>Action</th>
                  </tr>
                </thead>
                <tbody>
                  <tr>
                    <td class="help shortcut"><kbd>?</kbd></td>
                    <td>Open this help</td>
                  </tr>
                  <tr>
                    <td class="next shortcut"><kbd>n</kbd></td>
                    <td>Next page</td>
                  </tr>
                  <tr>
                    <td class="prev shortcut"><kbd>p</kbd></td>
                    <td>Previous page</td>
                  </tr>
                  <tr>
                    <td class="search shortcut"><kbd>s</kbd></td>
                    <td>Search</td>
                  </tr>
                </tbody>
              </table>
            </div>
            <div class="modal-footer">
            </div>
        </div>
    </div>
</div>
    </body>

</html>
